!function(){"use strict";angular.module("tpl.select",[]).factory("tplSelectService",function(){var a=function(a){var c=b(a);return c.querySelectorAll(".tpl-select__list")},b=function c(a){return angular.element(a).hasClass("tpl-select")?a:c(a.parentElement)};return{bindTriggerClick:function(b){var c=angular.element(b.querySelectorAll(".tpl-select__trigger"));c.bind("click",function(){var c="tpl-select__list--invisible",d=a(b);d[0].className.indexOf(c)>-1?(angular.element(document.getElementsByClassName("tpl-select__list")).addClass(c),angular.element(d).removeClass(c)):angular.element(d).addClass(c)})},bindListClick:function(b){var c=a(b);c.bind("click",function(c){a(b).addClass("tpl-select__list--invisible"),c.preventDefault()})},bindListMouseleave:function(b){var c=a(b);c.bind("mouseleave",function(c){a(b).addClass("tpl-select__list--invisible"),c.preventDefault()})}}}).factory("tplSelectCacheService",function(){var a={},b={},c=function(a){return a.replace(".","_").replace("[","_").replace("]","_")};return b.setValue=function(b,d){b=c(b),a[b]=d},b.getValue=function(b){return b=c(b),a[b]},b}).controller("tplSelectController",["$scope","tplSelectCacheService",function(a,b){a.modelHolder=null,a.key=null,a.select=function(c){a.modelHolder.$setViewValue(c),b.setValue(a.key,c)}}]).directive("tplSelect",["tplSelectService","tplSelectCacheService",function(a,b){return{restrict:"A",controller:"tplSelectController",template:'<div class="tpl-select"><div class="tpl-select__trigger"><div ng-if="tplLabel">{{ngModel[tplLabel] | translate}}</div><div ng-if="!tplLabel">{{ngModel | translate}}</div></div><ul class="tpl-select__list tpl-select__list--invisible"><li class="tpl-select__list-item" ng-repeat="option in tplOptions" ng-Click="select(option)"><div ng-if="tplLabel">{{option[tplLabel] | translate}}</div><div ng-if="!tplLabel">{{option | translate}}</div></li></ul></div>',replace:!0,scope:{ngModel:"=",tplOptions:"=",tplLabel:"@"},require:"ngModel",link:function(c,d,e,f){if(c.modelHolder=f,c.key=e.ngModel,c.tplOptions){if(c.tplOptions.length>0){var g=b.getValue(c.key)||c.tplOptions[0];f.$setViewValue(g)}a.bindTriggerClick(d),a.bindListClick(d),a.bindListMouseleave(d)}}}}]).controller("tplSelectStaticController",["$scope","tplSelectCacheService",function(a,b){a.modelHolder=null,a.key=null,a.tplOptions=[],a.select=function(c){a.modelHolder.$setViewValue(c),b.setValue(a.key,c)}}]).directive("tplSelectStatic",["tplSelectService","tplSelectCacheService",function(a,b){return{restrict:"A",controller:"tplSelectStaticController",template:'<div class="tpl-select"><div class="tpl-select__trigger">{{ngModel.label | translate}}</div><ul class="tpl-select__list tpl-select__list--invisible"><li class="tpl-select__list-item" ng-repeat="option in tplOptions" ng-Click="select(option)">{{option.label | translate}}</li></ul></div>',transclude:!0,replace:!0,scope:{ngModel:"="},require:"ngModel",link:function(c,d,e,f,g){c.modelHolder=f,c.key=e.ngModel,g(function(a){for(var d=0;d<a.length;d++)if(a[d].value){var e={};e.key=a[d].value,e.label=a[d].innerHTML,c.tplOptions.push(e)}a="";var g=b.getValue(c.key)||c.tplOptions[0];f.$setViewValue(g)}),a.bindTriggerClick(d),a.bindListClick(d),a.bindListMouseleave(d)}}}])}();