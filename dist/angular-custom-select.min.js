!function(){"use strict";angular.module("tpl.select",[]).factory("tplSelectService",function(){var a=function(a){var c=b(a);return c.querySelectorAll(".tpl-select__list")},b=function c(a){return angular.element(a).hasClass("tpl-select")?a:c(a.parentElement)};return{bindTriggerClick:function(b){var c=angular.element(b.querySelectorAll(".tpl-select__trigger"));c.bind("click",function(){var c="tpl-select__list--invisible",d=a(b);d[0].className.indexOf(c)>-1?(angular.element(document.getElementsByClassName("tpl-select__list")).addClass(c),angular.element(d).removeClass(c)):angular.element(d).addClass(c)})},bindListClick:function(b){var c=a(b);c.bind("click",function(c){a(b).addClass("tpl-select__list--invisible"),c.preventDefault()})},bindListMouseleave:function(b){var c=a(b);c.bind("mouseleave",function(c){a(b).addClass("tpl-select__list--invisible"),c.preventDefault()})}}}).controller("tplSelectController",["$scope",function(a){a.modelHolder=null,a.notSet="null",a.select=function(b){a.modelHolder.$setViewValue(b)}}]).directive("tplSelect",["tplSelectService",function(a){return{restrict:"A",controller:"tplSelectController",template:'<div class="tpl-select"><div class="tpl-select__trigger"><div ng-if="tplLabel">{{ngModel[tplLabel] | translate}}</div><div ng-if="!tplLabel">{{ngModel | translate}}</div></div><ul class="tpl-select__list tpl-select__list--invisible"><li class="tpl-select__list-item" ng-repeat="option in tplOptions" ng-Click="select(option)"><div ng-if="tplLabel">{{option[tplLabel] | translate}}</div><div ng-if="!tplLabel">{{option | translate}}</div></li></ul></div>',replace:!0,scope:{ngModel:"=",tplOptions:"=",tplLabel:"@"},require:"ngModel",link:function(b,c,d,e){b.modelHolder=e,b.tplOptions&&(b.tplOptions.length>0&&(b.ngModel=b.tplOptions[0]),a.bindTriggerClick(c),a.bindListClick(c),a.bindListMouseleave(c))}}}]).controller("tplSelectStaticController",["$scope","$transclude",function(a){a.modelHolder=null,a.tplOptions=[],a.select=function(b){a.modelHolder.$setViewValue(b)}}]).directive("tplSelectStatic",["tplSelectService",function(a){return{restrict:"A",controller:"tplSelectStaticController",template:'<div class="tpl-select"><div class="tpl-select__trigger">{{ngModel.label | translate}}</div><ul class="tpl-select__list tpl-select__list--invisible"><li class="tpl-select__list-item" ng-repeat="option in tplOptions" ng-Click="select(option)">{{option.label | translate}}</li></ul></div>',transclude:!0,replace:!0,scope:{ngModel:"="},require:"ngModel",link:function(b,c,d,e,f){b.modelHolder=e,f(function(a){for(var c=0;c<a.length;c++)if(a[c].value){var d={};d.key=a[c].value,d.label=a[c].innerHTML,b.tplOptions.push(d)}a="",e.$setViewValue(b.tplOptions[0])}),a.bindTriggerClick(c),a.bindListClick(c),a.bindListMouseleave(c)}}}])}();